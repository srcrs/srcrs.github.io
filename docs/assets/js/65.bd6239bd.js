(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{599:function(t,s,a){"use strict";a.r(s);var e=a(3),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[a("code",[t._v("http")]),t._v("请求是无状态的，也就是请求一次的状态并不会保存下来，有的网站的一些操作权限只支持登录的用户，以前做的登录就是请求一次"),a("code",[t._v("API")]),t._v("，验证有没有这个用户，就假装登陆了。如何授权并保持这样的登录状态呢？")])]),t._v(" "),a("p",[t._v("保存登录状态有大致两种方式，两者的区分点就是存不存在跨域的问题（跨域可以简单理解为，一个地址要请求另一个地址的内容）。")]),t._v(" "),a("p",[t._v("如果不存在跨域的问题，可以采用"),a("code",[t._v("cookie")]),t._v("(在客户端记录状态)和"),a("code",[t._v("session")]),t._v("(在服务端记录状态)的方式保存登录状态。客户端和服务器之间通常都是存在跨域的问题，因此就需要采用"),a("code",[t._v("token")]),t._v("的方式保存登录状态。")]),t._v(" "),a("p",[a("svg",{staticStyle:{cursor:"pointer","max-width":"100%","max-height":"345px"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"572px",viewBox:"-0.5 -0.5 572 345",content:'<mxfile host="app.diagrams.net" modified="2020-05-28T08:39:53.186Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.61 Safari/537.36" etag="mwDp8Vov1GDObwDZ9J9b" version="13.1.3"><diagram id="PQsuAjaLIpzGLL3Y-lxF" name="第 1 页">7VlLc+I4EP41OoayJNtIRxvIzB62amqzVZs5GluAdwxmjQmwv35bsvyQbR7JAkmmJgcitaTWo7/+uiUjOlruv2TBevF7GokEESvaIzpGhHDK4FcKDoWAWbwQzLM4KkS4FjzF/wottLR0G0diY3TM0zTJ47UpDNPVSoS5IQuyLN2Z3WZpYs66DuaiI3gKg6Qr/SuO8oXeBRnW8q8ini/KmbGr97cMys56J5tFEKW7hohOEB1laZoXpeV+JBJ5duW5FOMej7RWC8vEKr9kgLcON7+toz/E899frB/Py5398P1Ba3kJkq3eMCJuAvr8WQpqYdX5QR+F+882LRseNspQHnTAbL2vG6E01/+VlmklmLjIdxB7RBOGvCFiDE0cxDnyWNkXlj5tjwdZsZBSTIw1kSzdriIhd2hB824R5+JpHYSydQd4BNkiXyZQw1AMpps02ebCy0INNCWtazZUN3mW/qhsTeSG4yQZpUmaqSnpbCbcMKx6NlqiIZ9aVrXMF5HlYn/UWrjCAPiOSJcizw7QZV/6STFCuw0uUbSrQYhdLVs0AEjLjoEG/rxSXWMDChoer4AKuSdU+AixsUQI85CHPytUIkewyO6DCiNT6rrXgYrNPxxWaA9WWuYAOlzL4iwRe08SNRyGWEW6OA6TYLOJQ9Mq5YZc1RcW+qytqSrfZWVgUVwKxvtm8/jQrH0TWQx7FZkWFusTUScatKwA4SfI5iI/5yhdazWs4fQYo5RlIgny+MVcRp+B9Azf0lh5nwYDsdtg4KaKTbrNQqFHNcNFSxFtMRBrYaU4ho4eBZdq129HkN1F0GSIuC1JAPgBwoc/VBKOfF/ygz9G3OmgDLwqb3l2Es9XEmBgV2l9X/peDAHf0w3LOIrkcD8TQF3BVKmSEFnLvardOz5yxlLXNk83NT1cwZcpdUzzWV1f7nPlm3myc0dPxqYnE8zPefI+zp8Lr7dcXTfGQr0eKisnOUD2eDsvFI51PoCe5Y8jCLkTfwxNt7etFrIu5Q/HtgbcbesaYHIRjQB4gkOjm/a9GxCN20M0kGp4iI1UqvqIGJYS4D/uSYkPkqFiHKAeV7MSf9SsBLFYSnzkqwTX96D1T4j9q09PTYS1qMm9MM24GTcNz3PTOR4qGQQPrIoxCgahhJ1mkB6yqJmsVFezmU3ZGTYzE9T/maWcZaNLs5l3ZSNKTTaq2OnV2QxuKeKXpTPHeejIPKQ1D3FOr6vd3zUu8VAoVnBVyuO3j+mXAvWjpMkVPl4LrPblq6PoxnlyOZ0Rv1wZhiD0yAAEIcwtAtBEPb/wMprJsKbim0ykXeRjxLo4+GxBilpmkKquLc0gRe4ZpMqExzCQgzy4rqgMAQ7dYz9HhtBh6/Iy0zj84V3P/oJ3iEszhAe4ZGBipAhDi749Raj11TkCw+6ZHKE3KzAThyvmCJfeWN71xYPaV7qx2K0cwW7j8ko5Qnseap/OETr9Gb59joD7HmDa96Kfk7ao89609evR5WNnj5D0weYbf613DvpGBiKUDyz7tK53fzDBfS8m6lmE2+pDjY/4pPsIorJSKFvqoWSMvMnnJw5yJPI0UMivQxxQrb8UF5asP7fTyX8=</diagram></mxfile>',onclick:"(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&&src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&&!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&&evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://app.diagrams.net/?client=1&lightbox=1&edit=_blank');}}})(this);"}},[a("defs"),a("g",[a("rect",{attrs:{x:"1",y:"20",width:"160",height:"320",fill:"#ffe6cc",stroke:"#d79b00","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"158px",height:"1px","padding-top":"180px","margin-left":"2px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[a("font",{staticStyle:{"font-size":"18px"}},[a("b",[t._v("浏览器")])])],1)])])]),a("text",{attrs:{x:"81",y:"184",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("浏览器")])],1)]),a("rect",{attrs:{x:"411",y:"20",width:"160",height:"320",fill:"#d5e8d4",stroke:"#82b366","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"158px",height:"1px","padding-top":"180px","margin-left":"412px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[a("font",{staticStyle:{"font-size":"18px"}},[a("b",[t._v("服务器")])])],1)])])]),a("text",{attrs:{x:"491",y:"184",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("服务器")])],1)]),a("path",{attrs:{d:"M 161.49 32 L 161.51 26 L 391.51 26.85 L 391.55 16.35 L 410.5 29.92 L 391.45 43.35 L 391.49 32.85 Z",fill:"none",stroke:"#000000","stroke-linejoin":"round","stroke-miterlimit":"10","pointer-events":"all"}}),a("rect",{attrs:{x:"256",y:"0",width:"60",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"10px","margin-left":"286px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("用户登录")])])])]),a("text",{attrs:{x:"286",y:"14",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("用户登录")])],1)]),a("path",{attrs:{d:"M 411.46 87.08 L 411.46 93.08 L 180.5 93.08 L 180.5 103.58 L 161.5 90.08 L 180.5 76.58 L 180.5 87.08 Z",fill:"none",stroke:"#000000","stroke-linejoin":"round","stroke-miterlimit":"10","pointer-events":"all"}}),a("rect",{attrs:{x:"206",y:"60",width:"160",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"70px","margin-left":"286px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("验证通过并生成相应Token")])])])]),a("text",{attrs:{x:"286",y:"74",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("验证通过并生成相应Token")])],1)]),a("path",{attrs:{d:"M 164.04 124.96 L 241 125 L 241 160 L 170.41 160.15",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 165.16 160.16 L 172.15 156.64 L 170.41 160.15 L 172.17 163.64 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 161.5 213 L 161.5 207 L 391.5 207 L 391.5 196.5 L 410.5 210 L 391.5 223.5 L 391.5 213 Z",fill:"none",stroke:"#000000","stroke-linejoin":"round","stroke-miterlimit":"10","pointer-events":"all"}}),a("rect",{attrs:{x:"226",y:"180",width:"120",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"190px","margin-left":"286px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("携带Token发送请求")])])])]),a("text",{attrs:{x:"286",y:"194",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("携带Token发送请求")])],1)]),a("rect",{attrs:{x:"251",y:"135",width:"70",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"145px","margin-left":"286px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("存储Token")])])])]),a("text",{attrs:{x:"286",y:"149",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("存储Token")])],1)]),a("path",{attrs:{d:"M 409.08 244.96 L 331 245 L 331 281 L 402.71 281.11",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 407.96 281.12 L 400.96 284.61 L 402.71 281.11 L 400.97 277.61 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("rect",{attrs:{x:"251",y:"255",width:"70",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"265px","margin-left":"286px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("验证Token")])])])]),a("text",{attrs:{x:"286",y:"269",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("验证Token")])],1)]),a("path",{attrs:{d:"M 410.5 327 L 410.5 333 L 179.54 333 L 179.54 343.5 L 160.54 330 L 179.54 316.5 L 179.54 327 Z",fill:"none",stroke:"#000000","stroke-linejoin":"round","stroke-miterlimit":"10","pointer-events":"all"}}),a("rect",{attrs:{x:"241",y:"300",width:"90",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"310px","margin-left":"286px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("返回相应数据")])])])]),a("text",{attrs:{x:"286",y:"314",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("返回相应数据")])],1)])]),a("switch",[a("g",{attrs:{requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}}),a("a",{attrs:{transform:"translate(0,-5)","xlink:href":"https://desk.draw.io/support/solutions/articles/16000042487",target:"_blank"}},[a("text",{attrs:{"text-anchor":"middle","font-size":"10px",x:"50%",y:"100%"}},[t._v("Viewer does not support full SVG 1.1")])])])])]),t._v(" "),a("h2",{attrs:{id:"注册流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册流程"}},[t._v("#")]),t._v(" 注册流程")]),t._v(" "),a("p",[t._v("保存登录状态首先肯定是对于注册的用户来说的，先来看看注册流程，比较简单一点。对于注册页面不应该被拦截。由于"),a("code",[t._v("token")]),t._v("中包含了密码，"),a("code",[t._v("token")]),t._v("对于别人来说相当于明文，加密就是用的"),a("code",[t._v("base64")]),t._v("，很好解开，所以一旦"),a("code",[t._v("token")]),t._v("泄露就很危险了，这里密码和账户最好用"),a("code",[t._v("BCR")]),t._v("加密一下。")]),t._v(" "),a("p",[a("svg",{staticStyle:{cursor:"pointer","max-width":"100%","max-height":"300px"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"539px",viewBox:"-0.5 -0.5 539 300",content:'<mxfile host="app.diagrams.net" modified="2020-05-31T16:32:39.642Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.61 Safari/537.36" etag="sPsebaYH_X_00P57mmdP" version="13.1.8"><diagram id="PQsuAjaLIpzGLL3Y-lxF" name="第 1 页">3VrbcqM4EP0aPSbF/fIIvuxM7exudvOQydOWAhqbGmy5hDy29+tXAnETOMYMGGeqUimpaQmp+/RRqw3QZ5vjbwTu1n/gEMVAU8Ij0OdA01zdYf+54JQJHMXNBCsShZlILQXP0X9ICBUh3UchSmqKFOOYRru6MMDbLQpoTQYJwYe62jcc19+6gyvUEDwHMG5KX6KQrsUuNLuUf0LRap2/WbXE/jYwVxY7SdYwxIeKSF8AfUYwpllrc5yhmNsut0s2bnnmabEwgra0y4DAenl9+VNff1nMjw/m599P/8Z/P2jZLD9gvBcbBgsT+DPgKLzh2cDxxfLpKbdJQgn+XpiDbcRf003Mmiprsm3uuN7muOKAePwW40OwhoQ+UkQ20RZSTJjaYR1R9LyDAdc9ME0mI3i/DRFfrsJ6YmWIUHQ8u2W1MCQDIMIbRMmJqYgBmi1sL8CXdw8VTwrRuuJEQ8igwM6qmLg0L2sIC19hbb3V2p4KPJ83HAu4LlgYwHeA56UNj//xxpKrLSzgMOVlwyN1y7XZtuIh+JbgeE+RRwIRb6m07BncjQ0fD+EPs+4P1Wg6RNVu6RGjxSMW8PQU/8wdzOwmWNjANYDnpPZ3gG+njxzuCOY1VwGelfpxzoVcMuPKv4iPCiaezEdmw0d/fQeLJWcptxkKPckpREGURHg7FTUVRHSBm5yxrGy3cxMzsysajJ5YJHgK56CFwynJ9XmDEZMzS/nL408L5Q8aAMbdkZTb4pr0SHDnFd5hHjEEEznLlKQaXvtFPKLpU3sk58SaS2zg+8DV08NhPiA13T5vMiRy0rWJEye1JXOSrYu2occTftYLYpgkUVA3MNs7OX3lRno08+6rsFnamR9rvVPeO0a0Moz1XvMZWbscxDvVMU+IRGz3iNT8gsLGfUPyCtsU3pMAXc7aKSQrRC/lm00vV7xotngxlxEUQxr9qC+3zbXiDU84YhspQKRKIFItCR3ZNsWo6sVFmqi4QeUTqdJEmR0aE6VIK7b9E+BrSRLvGXwDAk3vCDRjSqDpMj60nkBrTGTeGGjNTPeugZbOMCLNGR3RZ06KPl0Cjd4XffJEMl+OjT5rAPQNdFaWKK5huIT0GRQPCD7zQ5yxxplE7Vrwqa6UYtvdwMfQAE8VtR1XSM4vWD7LdUt5d12Ns7+uzxrZCoaNhJa7cN9IUCtxUEZFn0i4js8niAR7ykgwlDpQiv61kSBfNvWOScC1kSAvWJfL9xf08yz4nL6pvqs/UuQ405whA6Ld7oh2d0q0WxLvF/R9LdotifdV+Qo/dtLRUtv6YIBxOwJGVcCUiLEGyhRstV+mMBRi8nVXEOPP/ulQfuYVsSiA8Rf4huInnEQ0LffP3zCleMMwkSt4cbTiDyiWKqB5iW5HcICS5GI1Lh2TFUeVx7Q8WlZLrbGKpZZ8jZi8fJ3v4b0Y7/urDaTwDSboVoVROYq0lsKo1WJb+So3nG214fiznqpqF3LVMzc07YZXtK5HtTYp85ryESuXLzuf1dKhf+P6gDZEDT4/qmtQsztCTa1Dzb4h1PI4v+9LkAy1xtncF2qanC2MjbUhSu4/RWsPyqOi2nXA6aXgXBV15Ipo11zz3DF2o1xTShEbV+jOMJSTVvlSPzYMhyzIj8ded35XNd06l/T9HbBBSvK3ML3RwLrld5iZevkxq774Hw==</diagram></mxfile>',onclick:"(function(svg){var src=window.event.target||window.event.srcElement;while (src!=null&&src.nodeName.toLowerCase()!='a'){src=src.parentNode;}if(src==null){if(svg.wnd!=null&&!svg.wnd.closed){svg.wnd.focus();}else{var r=function(evt){if(evt.data=='ready'&&evt.source==svg.wnd){svg.wnd.postMessage(decodeURIComponent(svg.getAttribute('content')),'*');window.removeEventListener('message',r);}};window.addEventListener('message',r);svg.wnd=window.open('https://app.diagrams.net/?client=1&lightbox=1&edit=_blank');}}})(this);"}},[a("defs"),a("g",[a("path",{attrs:{d:"M 81.49 1 L 112.51 1 C 126.04 1 137 9.95 137 21 C 137 32.05 126.04 41 112.51 41 L 81.49 41 C 67.96 41 57 32.05 57 21 C 57 9.95 67.96 1 81.49 1 Z",fill:"#ffffff",stroke:"#000000","stroke-width":"2","stroke-miterlimit":"10","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"78px",height:"1px","padding-top":"21px","margin-left":"58px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("开始")])])])]),a("text",{attrs:{x:"97",y:"25",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("开始")])],1)]),a("rect",{attrs:{x:"37",y:"71",width:"120",height:"40",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"118px",height:"1px","padding-top":"91px","margin-left":"38px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("填写个人信息")])])])]),a("text",{attrs:{x:"97",y:"95",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("填写个人信息")])],1)]),a("rect",{attrs:{x:"37",y:"141",width:"120",height:"40",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"118px",height:"1px","padding-top":"161px","margin-left":"38px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("检查用户是否存在")])])])]),a("text",{attrs:{x:"97",y:"165",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("检查用户是否存在")])],1)]),a("path",{attrs:{d:"M 97 211 L 137 251 L 97 291 L 57 251 Z",fill:"#ffffff",stroke:"#000000","stroke-width":"2","stroke-miterlimit":"10","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"78px",height:"1px","padding-top":"251px","margin-left":"58px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("Ok？")])])])]),a("text",{attrs:{x:"97",y:"255",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("Ok？")])],1)]),a("rect",{attrs:{x:"237",y:"71",width:"120",height:"40",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"118px",height:"1px","padding-top":"91px","margin-left":"238px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("对密码进行加密")])])])]),a("text",{attrs:{x:"297",y:"95",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("对密码进行加密")])],1)]),a("rect",{attrs:{x:"237",y:"161",width:"120",height:"40",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"118px",height:"1px","padding-top":"181px","margin-left":"238px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("保存账号密码")])])])]),a("text",{attrs:{x:"297",y:"185",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("保存账号密码")])],1)]),a("path",{attrs:{d:"M 281.49 251 L 312.51 251 C 326.04 251 337 259.95 337 271 C 337 282.05 326.04 291 312.51 291 L 281.49 291 C 267.96 291 257 282.05 257 271 C 257 259.95 267.96 251 281.49 251 Z",fill:"#ffffff",stroke:"#000000","stroke-width":"2","stroke-miterlimit":"10","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"78px",height:"1px","padding-top":"271px","margin-left":"258px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("结束")])])])]),a("text",{attrs:{x:"297",y:"275",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("结束")])],1)]),a("path",{attrs:{d:"M 97 41 L 97 64.63",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 97 69.88 L 93.5 62.88 L 97 64.63 L 100.5 62.88 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 97 111 L 97 134.63",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 97 139.88 L 93.5 132.88 L 97 134.63 L 100.5 132.88 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 97 181 L 97 204.63",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 97 209.88 L 93.5 202.88 L 97 204.63 L 100.5 202.88 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 97 291 L 17 291 Q 7 291 7 281 L 7 101 Q 7 91 17 91 L 30.63 91",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 35.88 91 L 28.88 94.5 L 30.63 91 L 28.88 87.5 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 137 251 L 177 251 Q 187 251 187 241 L 187 51 Q 187 41 197 41 L 287 41 Q 297 41 297 51 L 297 64.63",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 297 69.88 L 293.5 62.88 L 297 64.63 L 300.5 62.88 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 297 111 L 297 154.63",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 297 159.88 L 293.5 152.88 L 297 154.63 L 300.5 152.88 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 297 201 L 297 244.63",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 297 249.88 L 293.5 242.88 L 297 244.63 L 300.5 242.88 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("rect",{attrs:{x:"417",y:"71",width:"120",height:"40",rx:"2.4",ry:"2.4",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("path",{attrs:{d:"M 434 71 L 434 111 M 520 71 L 520 111",fill:"none",stroke:"#000000","stroke-width":"2","stroke-miterlimit":"10","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe flex-start","justify-content":"unsafe center",width:"118px",height:"1px","padding-top":"118px","margin-left":"418px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("BCR加密")])])])]),a("text",{attrs:{x:"477",y:"130",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("BCR加密")])],1)]),a("path",{attrs:{d:"M 447 201 L 447 161 C 447 155.48 460.43 151 477 151 C 493.57 151 507 155.48 507 161 L 507 201 C 507 206.52 493.57 211 477 211 C 460.43 211 447 206.52 447 201 Z",fill:"#ffffff",stroke:"#000000","stroke-width":"2","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 447 161 C 447 166.52 460.43 171 477 171 C 493.57 171 507 166.52 507 161",fill:"none",stroke:"#000000","stroke-width":"2","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 357 81 L 410.63 81",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 415.88 81 L 408.88 84.5 L 410.63 81 L 408.88 77.5 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 417 101 L 363.37 101",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 358.12 101 L 365.12 97.5 L 363.37 101 L 365.12 104.5 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 357 171 L 439.61 170.09",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 444.86 170.03 L 437.9 173.61 L 439.61 170.09 L 437.82 166.61 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 446 191 L 363.37 191",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 358.12 191 L 365.12 187.5 L 363.37 191 L 365.12 194.5 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}})]),a("switch",[a("g",{attrs:{requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}}),a("a",{attrs:{transform:"translate(0,-5)","xlink:href":"https://desk.draw.io/support/solutions/articles/16000042487",target:"_blank"}},[a("text",{attrs:{"text-anchor":"middle","font-size":"10px",x:"50%",y:"100%"}},[t._v("Viewer does not support full SVG 1.1")])])])])]),t._v(" "),a("h2",{attrs:{id:"登录流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录流程"}},[t._v("#")]),t._v(" 登录流程")]),t._v(" "),a("p",[t._v("登录的流程，首先访问登录页面，把本地存储的文件都带上，主要就是看是否含有"),a("code",[t._v("token")]),t._v("令牌，然后登录被拦截，如果未含有"),a("code",[t._v("token")]),t._v("就直接输入账号密码，验证用户的身份，如果验证通过，就可以生成一个新的令牌，交给用户然后本地存储操作，如果用户名或者密码错误，就提示用户重新输入，再次验证身份。如果本地含有令牌，就验证令牌是否有效，如果令牌失效，就重新输入账号密码验证身份，颁发新的令牌。登录流程主要就是能得到一个能使用的令牌。")]),t._v(" "),a("p",[a("svg",{staticStyle:{"max-width":"100%","max-height":"422px"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"692px",viewBox:"-0.5 -0.5 692 422"}},[a("defs"),a("g",[a("rect",{attrs:{x:"1",y:"10",width:"45",height:"180",rx:"7",ry:"7",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"43px",height:"1px","padding-top":"100px","margin-left":"2px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("登"),a("br"),t._v("录")])])])]),a("text",{attrs:{x:"24",y:"104",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("登\n录")])],1)]),a("rect",{attrs:{x:"216",y:"10",width:"45",height:"100",rx:"7",ry:"7",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"43px",height:"1px","padding-top":"60px","margin-left":"217px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("拦"),a("br"),t._v("截")])])])]),a("text",{attrs:{x:"239",y:"64",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("拦\n截")])],1)]),a("rect",{attrs:{x:"216",y:"160",width:"45",height:"190",rx:"7",ry:"7",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"43px",height:"1px","padding-top":"255px","margin-left":"217px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("令"),a("br"),t._v("牌")])])])]),a("text",{attrs:{x:"239",y:"259",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("令\n牌")])],1)]),a("path",{attrs:{d:"M 600.18 10 L 681.82 10 C 686.89 10 691 23.43 691 40 C 691 56.57 686.89 70 681.82 70 L 600.18 70 C 595.11 70 591 56.57 591 40 C 591 23.43 595.11 10 600.18 10 Z",fill:"#ffffff",stroke:"#000000","stroke-width":"2","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 681.82 10 C 676.74 10 672.63 23.43 672.63 40 C 672.63 56.57 676.74 70 681.82 70",fill:"none",stroke:"#000000","stroke-width":"2","stroke-miterlimit":"10","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"98px",height:"1px","padding-top":"40px","margin-left":"592px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("DB")])])])]),a("text",{attrs:{x:"641",y:"44",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("DB")])],1)]),a("rect",{attrs:{x:"416",y:"10",width:"45",height:"110",rx:"7",ry:"7",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"43px",height:"1px","padding-top":"65px","margin-left":"417px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("验"),a("br"),t._v("证"),a("br"),t._v("账"),a("br"),t._v("号"),a("br"),t._v("密"),a("br"),t._v("码")])])])]),a("text",{attrs:{x:"439",y:"69",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("验证账号密码...")])],1)]),a("rect",{attrs:{x:"416",y:"150",width:"45",height:"120",rx:"7",ry:"7",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"43px",height:"1px","padding-top":"210px","margin-left":"417px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("验"),a("br"),t._v("证"),a("br"),t._v("令"),a("br"),t._v("牌")])])])]),a("text",{attrs:{x:"439",y:"214",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("验证令牌...")])],1)]),a("rect",{attrs:{x:"619.75",y:"90",width:"42.5",height:"330",rx:"7",ry:"7",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"41px",height:"1px","padding-top":"255px","margin-left":"621px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("生"),a("br"),t._v("成"),a("br"),t._v("令"),a("br"),t._v("牌")])])])]),a("text",{attrs:{x:"641",y:"259",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("生成令牌...")])],1)]),a("path",{attrs:{d:"M 510.18 288 L 591.82 288 C 596.89 288 601 301.43 601 318 C 601 334.57 596.89 348 591.82 348 L 510.18 348 C 505.11 348 501 334.57 501 318 C 501 301.43 505.11 288 510.18 288 Z",fill:"#ffffff",stroke:"#000000","stroke-width":"2","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 591.82 288 C 586.74 288 582.63 301.43 582.63 318 C 582.63 334.57 586.74 348 591.82 348",fill:"none",stroke:"#000000","stroke-width":"2","stroke-miterlimit":"10","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"98px",height:"1px","padding-top":"318px","margin-left":"502px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("DB")])])])]),a("text",{attrs:{x:"551",y:"322",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("DB")])],1)]),a("path",{attrs:{d:"M 46 29.98 L 208.63 30",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 213.88 30 L 206.88 33.5 L 208.63 30 L 206.88 26.5 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 261 29 L 409.63 30.82",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 414.88 30.89 L 407.84 34.3 L 409.63 30.82 L 407.93 27.3 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 461 29.8 L 584.63 29.97",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 589.88 29.98 L 582.88 33.47 L 584.63 29.97 L 582.89 26.47 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 593 53.02 L 467.37 56.05",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 462.12 56.17 L 469.03 52.51 L 467.37 56.05 L 469.2 59.5 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 261 85 L 291 85 Q 301 85 301 95 L 301 172 Q 301 182 291 182 L 267.37 182",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 262.12 182 L 269.12 178.5 L 267.37 182 L 269.12 185.5 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 262 210 L 409.63 210",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 414.88 210 L 407.88 213.5 L 409.63 210 L 407.88 206.5 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 415.01 255 L 267.37 255",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 262.12 255 L 269.12 251.5 L 267.37 255 L 269.12 258.5 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 416 60.05 L 267.37 60",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 262.12 60 L 269.12 56.5 L 267.37 60 L 269.12 63.5 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 217 78 L 51.38 77",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 46.13 76.97 L 53.15 73.51 L 51.38 77 L 53.11 80.51 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("rect",{attrs:{x:"86",y:"0",width:"90",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"10px","margin-left":"131px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("进入登录页面")])])])]),a("text",{attrs:{x:"131",y:"14",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("进入登录页面")])],1)]),a("rect",{attrs:{x:"46",y:"80",width:"170",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"90px","margin-left":"131px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("已登录或验证失败或令牌失效")])])])]),a("text",{attrs:{x:"131",y:"94",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("已登录或验证失败或令牌失效")])],1)]),a("rect",{attrs:{x:"281",y:"0",width:"100",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"10px","margin-left":"331px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("输入用户名密码")])])])]),a("text",{attrs:{x:"331",y:"14",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("输入用户名密码")])],1)]),a("rect",{attrs:{x:"471",y:"0",width:"100",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"10px","margin-left":"521px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("验证用户名密码")])])])]),a("text",{attrs:{x:"521",y:"14",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("验证用户名密码")])],1)]),a("path",{attrs:{d:"M 461 100.97 L 614.61 100.89",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 619.86 100.89 L 612.87 104.39 L 614.61 100.89 L 612.86 97.39 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("rect",{attrs:{x:"307",y:"190",width:"60",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"200px","margin-left":"337px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("验证令牌")])])])]),a("text",{attrs:{x:"337",y:"204",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("验证令牌")])],1)]),a("rect",{attrs:{x:"315",y:"260",width:"60",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"270px","margin-left":"345px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("令牌失效")])])])]),a("text",{attrs:{x:"345",y:"274",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("令牌失效")])],1)]),a("rect",{attrs:{x:"356",y:"320",width:"60",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"330px","margin-left":"386px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("令牌有效")])])])]),a("text",{attrs:{x:"386",y:"334",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("令牌有效")])],1)]),a("path",{attrs:{d:"M 238.5 160 L 238.5 116.37",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 238.5 111.12 L 242 118.12 L 238.5 116.37 L 235 118.12 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("rect",{attrs:{x:"176",y:"130",width:"60",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"140px","margin-left":"206px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("令牌失效")])])])]),a("text",{attrs:{x:"206",y:"144",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("令牌失效")])],1)]),a("rect",{attrs:{x:"307",y:"100",width:"30",height:"60",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"130px","margin-left":"322px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("存"),a("br"),t._v("在"),a("br"),t._v("令"),a("br"),t._v("牌")])])])]),a("text",{attrs:{x:"322",y:"134",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("存在令牌...")])],1)]),a("rect",{attrs:{x:"1",y:"230",width:"45",height:"170",rx:"7",ry:"7",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"43px",height:"1px","padding-top":"315px","margin-left":"2px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("本"),a("br"),t._v("地"),a("br"),t._v("存"),a("br"),t._v("储")])])])]),a("text",{attrs:{x:"24",y:"319",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("本地存储...")])],1)]),a("path",{attrs:{d:"M 501 318 L 266.38 318.63",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 261.13 318.65 L 268.12 315.13 L 266.38 318.63 L 268.14 322.13 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 618.01 380.07 L 52.37 381.96",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 47.12 381.98 L 54.11 378.45 L 52.37 381.96 L 54.13 385.45 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("rect",{attrs:{x:"292",y:"360",width:"60",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"370px","margin-left":"322px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("新的令牌")])])])]),a("text",{attrs:{x:"322",y:"374",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("新的令牌")])],1)]),a("path",{attrs:{d:"M 23.5 230 L 23.5 196.37",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 23.5 191.12 L 27 198.12 L 23.5 196.37 L 20 198.12 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("rect",{attrs:{x:"501",y:"60",width:"60",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"70px","margin-left":"531px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("验证失败")])])])]),a("text",{attrs:{x:"531",y:"74",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("验证失败")])],1)]),a("rect",{attrs:{x:"511",y:"110",width:"60",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"120px","margin-left":"541px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("验证通过")])])])]),a("text",{attrs:{x:"541",y:"124",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("验证通过")])],1)]),a("rect",{attrs:{x:"315",y:"60",width:"60",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"70px","margin-left":"345px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("验证失败")])])])]),a("text",{attrs:{x:"345",y:"74",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("验证失败")])],1)]),a("path",{attrs:{d:"M 438.5 270 L 439 317",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}})]),a("switch",[a("g",{attrs:{requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}}),a("a",{attrs:{transform:"translate(0,-5)","xlink:href":"https://desk.draw.io/support/solutions/articles/16000042487",target:"_blank"}},[a("text",{attrs:{"text-anchor":"middle","font-size":"10px",x:"50%",y:"100%"}},[t._v("Viewer does not support full SVG 1.1")])])])])]),t._v(" "),a("h2",{attrs:{id:"携带令牌请求api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#携带令牌请求api"}},[t._v("#")]),t._v(" 携带令牌请求API")]),t._v(" "),a("p",[t._v("这里就是需要注意的就是如何携带"),a("code",[t._v("token")]),t._v("请求"),a("code",[t._v("API")]),t._v("。")]),t._v(" "),a("p",[a("svg",{staticStyle:{"max-width":"100%","max-height":"252px"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"487px",viewBox:"-0.5 -0.5 487 252"}},[a("defs"),a("g",[a("rect",{attrs:{x:"1",y:"1",width:"45",height:"250",rx:"7",ry:"7",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"43px",height:"1px","padding-top":"126px","margin-left":"2px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("携"),a("br"),t._v("带"),a("br"),t._v("令"),a("br"),t._v("牌"),a("br"),t._v("访"),a("br"),t._v("问"),a("br"),t._v("API")])])])]),a("text",{attrs:{x:"24",y:"130",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("携带令牌访问API...")])],1)]),a("rect",{attrs:{x:"86",y:"58.5",width:"90",height:"45",rx:"7",ry:"7",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"88px",height:"1px","padding-top":"81px","margin-left":"87px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("本地存储")])])])]),a("text",{attrs:{x:"131",y:"85",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("本地存储")])],1)]),a("rect",{attrs:{x:"231",y:"1",width:"45",height:"80",rx:"7",ry:"7",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"43px",height:"1px","padding-top":"41px","margin-left":"232px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("拦"),a("br"),t._v("截"),a("br"),t._v("令"),a("br"),t._v("牌")])])])]),a("text",{attrs:{x:"254",y:"45",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("拦截令牌...")])],1)]),a("rect",{attrs:{x:"231",y:"111",width:"45",height:"80",rx:"7",ry:"7",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"43px",height:"1px","padding-top":"151px","margin-left":"232px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("验"),a("br"),t._v("证"),a("br"),t._v("令"),a("br"),t._v("牌")])])])]),a("text",{attrs:{x:"254",y:"155",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("验证令牌...")])],1)]),a("path",{attrs:{d:"M 47 31 L 223.64 31",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 228.89 31 L 221.89 34.5 L 223.64 31 L 221.89 27.5 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 276 41 L 301 41 Q 311 41 311 51 L 311 121 Q 311 131 301 131 L 282.37 131",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 277.12 131 L 284.12 127.5 L 282.37 131 L 284.12 134.5 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 276 151 L 434.63 151",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 439.88 151 L 432.88 154.5 L 434.63 151 L 432.88 147.5 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("path",{attrs:{d:"M 231 151 L 52.37 150.03",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 47.12 150.01 L 54.14 146.54 L 52.37 150.03 L 54.1 153.54 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("rect",{attrs:{x:"91",y:"131",width:"60",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"141px","margin-left":"121px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("令牌失效")])])])]),a("text",{attrs:{x:"121",y:"145",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("令牌失效")])],1)]),a("rect",{attrs:{x:"315",y:"51",width:"30",height:"60",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"81px","margin-left":"330px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("取"),a("br"),t._v("得"),a("br"),t._v("令"),a("br"),t._v("牌")])])])]),a("text",{attrs:{x:"330",y:"85",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("取得令牌...")])],1)]),a("rect",{attrs:{x:"101",y:"11",width:"60",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"21px","margin-left":"131px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("请求API")])])])]),a("text",{attrs:{x:"131",y:"25",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("请求API")])],1)]),a("rect",{attrs:{x:"441",y:"1",width:"45",height:"250",rx:"7",ry:"7",fill:"#ffffff",stroke:"#000000","stroke-width":"2","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"43px",height:"1px","padding-top":"126px","margin-left":"442px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"normal","word-wrap":"normal"}},[t._v("API"),a("br"),t._v("池")])])])]),a("text",{attrs:{x:"464",y:"130",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("API...")])],1)]),a("path",{attrs:{d:"M 441 209 L 51.37 209",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 46.12 209 L 53.12 205.5 L 51.37 209 L 53.12 212.5 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}}),a("rect",{attrs:{x:"186",y:"219",width:"60",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"229px","margin-left":"216px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("获得数据")])])])]),a("text",{attrs:{x:"216",y:"233",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("获得数据")])],1)]),a("rect",{attrs:{x:"291",y:"151",width:"130",height:"20",fill:"none",stroke:"none","pointer-events":"all"}}),a("g",{attrs:{transform:"translate(-0.5 -0.5)"}},[a("switch",[a("foreignObject",{staticStyle:{overflow:"visible","text-align":"left"},attrs:{"pointer-events":"none",width:"100%",height:"100%",requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}},[a("div",{staticStyle:{display:"flex","align-items":"unsafe center","justify-content":"unsafe center",width:"1px",height:"1px","padding-top":"161px","margin-left":"356px"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[a("div",{staticStyle:{"box-sizing":"border-box","font-size":"0","text-align":"center"}},[a("div",{staticStyle:{display:"inline-block","font-size":"12px","font-family":"Helvetica",color:"#000000","line-height":"1.2","pointer-events":"all","white-space":"nowrap"}},[t._v("令牌有效,fangwenAPI")])])])]),a("text",{attrs:{x:"356",y:"165",fill:"#000000","font-family":"Helvetica","font-size":"12px","text-anchor":"middle"}},[t._v("令牌有效,fangwenAPI")])],1)]),a("path",{attrs:{d:"M 86 81 L 50.37 81.85",fill:"none",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"stroke"}}),a("path",{attrs:{d:"M 45.12 81.97 L 52.03 78.31 L 50.37 81.85 L 52.2 85.31 Z",fill:"#000000",stroke:"#000000","stroke-miterlimit":"10","pointer-events":"all"}})]),a("switch",[a("g",{attrs:{requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility"}}),a("a",{attrs:{transform:"translate(0,-5)","xlink:href":"https://desk.draw.io/support/solutions/articles/16000042487",target:"_blank"}},[a("text",{attrs:{"text-anchor":"middle","font-size":"10px",x:"50%",y:"100%"}},[t._v("Viewer does not support full SVG 1.1")])])])])]),t._v(" "),a("h2",{attrs:{id:"pom-xml中需要的依赖包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pom-xml中需要的依赖包"}},[t._v("#")]),t._v(" pom.xml中需要的依赖包")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-jdbc"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mysql"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mysql-connector-java"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("scope")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("runtime"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("scope")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-web"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.mybatis.spring.boot"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("mybatis-spring-boot-starter"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("2.1.2"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- https://mvnrepository.com/artifact/com.alibaba/druid --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("com.alibaba"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("druid"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.1.22"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("io.jsonwebtoken"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("jjwt"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("0.9.0"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- https://mvnrepository.com/artifact/org.mindrot/jbcrypt --\x3e")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.mindrot"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("jbcrypt"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("0.4"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.springframework.boot"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("spring-boot-starter-test"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("scope")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("test"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("scope")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("exclusions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("exclusion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.junit.vintage"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("junit-vintage-engine"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("exclusion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("exclusions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h2",{attrs:{id:"程序整体结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#程序整体结构"}},[t._v("#")]),t._v(" 程序整体结构")]),t._v(" "),a("p",[t._v("程序整体结构放在这里，可以作为参考。")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[t._v(".\n├── .idea\n├── src\n│   └── main\n|       ├── java\n|       |   └── org\n|       |       └── example\n|       |           ├── controller\n|       |           |   └── UserController.java\n|       |           ├── dao\n|       |           |   └── UserMapper.java\n|       |           ├── domain\n|       |           |   └── User.java\n|       |           ├── service\n|       |           |   ├── UserService.java\n|       |           |   └── Impl\n|       |           |      └── UserServiceImpl.java\n|       |           ├── utils\n|       |           |   ├── JwtCfg.java\n|       |           |   ├── JwtFilter.java\n|       |           |   └── JwtUtils.java\n|       |           └── Application.java\n|       |           \n|       |           \n|       └── resources\n|           ├── org\n|           |   └── example\n|           |       └──dao\n|           |          └── UserMapper.xml\n|           └── application.properties\n├── target\n└── pom.xml\n")])])]),a("h2",{attrs:{id:"编写usercontroller-java"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写usercontroller-java"}},[t._v("#")]),t._v(" 编写UserController.java")]),t._v(" "),a("p",[t._v("这里包含一些"),a("code",[t._v("API")]),t._v("接口。只有"),a("code",[t._v("user/login")]),t._v("没有被拦截，其它接口都需要"),a("code",[t._v("token")]),t._v("认证才能够访问。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("controller")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mindrot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jbcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BCrypt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("beans"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("factory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Autowired")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bind"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("javax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("servlet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RestController")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/user"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserController")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test/findAll"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Controller表现层，查询所有用户"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" all "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test/addUser"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BCrypt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("hashpw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BCrypt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("gensalt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Controller表现层，增加用户"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"添加用户成功"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/login"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("login")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查询数据库，查找此用户输入信息是否正确")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" users "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        users "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('":"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BCrypt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkpw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"你输入的用户名或密码有误"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" token "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("geneJsonWebToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将token放在响应头")]),t._v("\n            response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Authorization"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bearer "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bearer "')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test/secure/check"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("check")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"登录成功"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"编写usermapper-java"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写usermapper-java"}},[t._v("#")]),t._v(" 编写UserMapper.java")]),t._v(" "),a("p",[t._v("这里是持久层的代码，创建访问数据库的接口，需要使用注解或者和一个同名的"),a("code",[t._v("xml")]),t._v("文件配合使用。访问数据库需要实现这些接口的功能。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dao")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stereotype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Repository")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Repository")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserMapper")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//查找所有的用户")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//增加一个用户")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//查找一个用户")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"编写user-java"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写user-java"}},[t._v("#")]),t._v(" 编写User.java")]),t._v(" "),a("p",[t._v("实体类，一般和数据库的属性是一致的，可以将数据库的一张表封装成一个实体类。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domain")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Serializable")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Serializable")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//用户名")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//密码")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUsername")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("username "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setPassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("password "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"User{"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('", username=\'"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" username "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\''")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('", password=\'"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" password "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\''")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'}'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"编写userservice-java"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写userservice-java"}},[t._v("#")]),t._v(" 编写UserService.java")]),t._v(" "),a("p",[t._v("业务层接口代码，和表现层接口代码一样，配合使用。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"编写userserviceimpl-java"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写userserviceimpl-java"}},[t._v("#")]),t._v(" 编写UserServiceImpl.java")]),t._v(" "),a("p",[t._v("实现业务层接口功能，供表现层调用。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Impl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserMapper")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("domain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("beans"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("factory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Autowired")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("stereotype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Service")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserServiceImpl")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserMapper")]),t._v(" userMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Service业务层，查询所有用户"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Service业务层，保存用户"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        userMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" userMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"编写jwtcfg-java"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写jwtcfg-java"}},[t._v("#")]),t._v(" 编写JwtCfg.java")]),t._v(" "),a("p",[t._v("JWT的配置类，例如可以配置具体的拦截的路径，现在我也只会配置这个^_^。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("boot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("servlet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FilterRegistrationBean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Bean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Configuration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtCfg")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Bean")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FilterRegistrationBean")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtFilter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("jwtFilter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FilterRegistrationBean")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtFilter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" registrationBean "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FilterRegistrationBean")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        registrationBean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setFilter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtFilter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对/user/test/*下的url进行拦截验证")]),t._v("\n        registrationBean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addUrlPatterns")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/user/test/*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" registrationBean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"编写jwtfilter-java"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写jwtfilter-java"}},[t._v("#")]),t._v(" 编写JwtFilter.java")]),t._v(" "),a("p",[t._v("这个类的作用是拦截器"),a("code",[t._v("（Filter）")]),t._v("，拦截的路径就是在"),a("code",[t._v("JwtCfg.java")]),t._v("中配置，可以获取到请求头中的令牌，也就是"),a("code",[t._v("token")]),t._v("，这个类我感觉也是比较核心的一个类，对于携带"),a("code",[t._v("token")]),t._v("的用户，需要将"),a("code",[t._v("token")]),t._v("拿过来，然后解码，获取到里面的值。")]),t._v(" "),a("p",[a("code",[t._v("token")]),t._v("就是类似这样的一串代码，前面的"),a("code",[t._v("Bearer")]),t._v("不包含在"),a("code",[t._v("token")]),t._v("中。当"),a("code",[t._v("token")]),t._v("过期的时候，"),a("code",[t._v("JWT")]),t._v("会自动判断其失效的，不用自己手动配置。")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[t._v("Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJhZG1pbiIsInVzZXJOYW1lIjoiMTExIiwiaWF0IjoxNTkxMDA3Njk4LCJleHAiOjE1OTEwOTQwOTh9.fidk9TBllhA_lb9CNODCf3HD4dp-NNsyOdPU0O3Wnhw\n")])])]),a("p",[t._v("解码之后就变成了这样")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[t._v("{sub=admin, userName=111, iat=1591007698, exp=1591094098}\n")])])]),a("p",[t._v("里面也还可以包含很多这样的键值对，下面是它们的含义。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("JWT标准里面定好的claim有：")]),t._v(" "),a("p",[t._v("iss(Issuser)：代表这个JWT的签发主体；")]),t._v(" "),a("p",[t._v("sub(Subject)：代表这个JWT的主体，即它的所有人；")]),t._v(" "),a("p",[t._v("aud(Audience)：代表这个JWT的接收对象；")]),t._v(" "),a("p",[t._v("exp(Expiration time)：是一个时间戳，代表这个JWT的过期时间；")]),t._v(" "),a("p",[t._v("nbf(Not Before)：是一个时间戳，代表这个JWT生效的开始时间，意味着在这个时间之前验证JWT是会失败的；")]),t._v(" "),a("p",[t._v("iat(Issued at)：是一个时间戳，代表这个JWT的签发时间；")]),t._v(" "),a("p",[t._v("jti(JWT ID)：是JWT的唯一标识。")])]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jsonwebtoken"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Claims")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jsonwebtoken"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jwts")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jsonwebtoken"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SignatureException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GenericFilterBean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("javax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("servlet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FilterChain")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("javax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("servlet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("javax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("servlet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("javax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("servlet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("javax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("servlet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("javax"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("servlet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtFilter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GenericFilterBean")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 秘钥\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" SECRET_KEY "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"secretkey"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletRequest")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletResponse")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FilterChain")]),t._v(" chain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),t._v(" response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletResponse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 从request中获取authorization")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" authHeader "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"authorization"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 判断token是否是用Bearer 开头的")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" header "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bearer "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("authHeader "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("authHeader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("startsWith")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("header"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//没有token或者token格式不对则抛一个异常，")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//也可以自己设置返回的状态码")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//response.setStatus(HttpServletResponse.SC_BAD_GATEWAY);")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在前端取得这样的状态码则说明请求失败")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Missing or invalid Authorization header"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 然后从授权处获取JWT令牌，去掉前面的Bearer")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" token "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" authHeader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("substring")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 使用JWT解析器检查签名是否与Key "secretkey "有效。')]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Claims")]),t._v(" claims "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jwts")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSigningKey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("SECRET_KEY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseClaimsJws")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBody")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("claims"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("claims"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getExpiration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在请求标题中添加claims")]),t._v("\n                    request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"claims"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" claims"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletException")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Invalid token"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        chain"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("doFilter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"jwtutils-java"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jwtutils-java"}},[t._v("#")]),t._v(" JwtUtils.java")]),t._v(" "),a("p",[t._v("这个是生成token的类。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jsonwebtoken"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jwts")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jsonwebtoken"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SignatureAlgorithm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("JwtUtils")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" SUBJECT "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"admin"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 过期时间，毫秒，一天\n     *\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("long")]),t._v(" EXPIRE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 秘钥\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" SECRET_KEY "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"secretkey"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * 生成jwt\n     * @param username\n     * @param password\n     * @return\n     */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("geneJsonWebToken")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isEmpty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StringUtils")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isEmpty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"用户名或密码不能为空"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Jwts")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("builder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setSubject")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("SUBJECT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("claim")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"userName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setIssuedAt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setExpiration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentTimeMillis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" EXPIRE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("signWith")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SignatureAlgorithm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HS256"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" SECRET_KEY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("compact")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"编写application-java"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写application-java"}},[t._v("#")]),t._v(" 编写Application.java")]),t._v(" "),a("p",[a("code",[t._v("SpringBoot")]),t._v("的主入口类。")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("example")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mybatis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("spring"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MapperScan")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("boot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringApplication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("boot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("autoconfigure"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringBootApplication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EnableTransactionManagement")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@SpringBootApplication")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableTransactionManagement")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@MapperScan")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"org.example.dao"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Application")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringApplication")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Application")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"编写usermapper-xml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写usermapper-xml"}},[t._v("#")]),t._v(" 编写UserMapper.xml")]),t._v(" "),a("p",[t._v("这个相当于持久层的接口"),a("code",[t._v("UserMapper.java")]),t._v("实现类，里面可以写一些SQL语句，对数据库进行CRUD。")]),t._v(" "),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token prolog"}},[t._v('<?xml version="1.0" encoding="UTF-8" ?>')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token doctype"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),a("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token name"}},[t._v("mapper")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token name"}},[t._v("PUBLIC")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-//mybatis.org//DTD Mapper 3.0//EN"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://mybatis.org/dtd/mybatis-3-mapper.dtd"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("mapper")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("namespace")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.example.dao.UserMapper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 开启二级缓存 --\x3e")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("cache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("findAll"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("resultType")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      select * from user\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("insert")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("addUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("parameterType")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        insert into User (username,password) values (\n        #{username},#{password}\n        );\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("insert")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("findUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("parameterType")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("resultType")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        select * from user where username=#{username};\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("mapper")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("h2",{attrs:{id:"application-properties"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#application-properties"}},[t._v("#")]),t._v(" application.properties")]),t._v(" "),a("p",[t._v("springboot的配置文件。")]),t._v(" "),a("div",{staticClass:"language-md extra-class"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[t._v("spring.datasource.type=com.alibaba.druid.pool.DruidDataSource\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.datasource.url=jdbc:mysql://localhost:3306/srcrs?useSSL=false&serverTimezone=UTC\nspring.datasource.username=root\nspring.datasource.password=123456\n\nmybatis.mapper-locations=classpath:org/example/dao/*.xml\nmybatis.type-aliases-package=org.example.domain\n")])])]),a("p",[t._v("至此就已经编写完了。目前可以做的就是通过"),a("code",[t._v("user/login")]),t._v("接口获得token令牌，然后通过这个令牌就可以访问其它所有已经定义好的接口，实现了简单的身份认证。但是这也还是不够用的，例如有些接口是不可以被外界所使用的，尤其是对一些重要的数据，所以接下来还得需要一个安全框架，实现认证与授权，通过定义一个个角色，对这些角色授予访问部分API接口的权限，能够让API接口更加的安全，现在这个样子是不行的，计划准备使用spring security来实现。")]),t._v(" "),a("p",[t._v("还有需要注意一些坑，最好要保证包的版本一直，否则可能会出一些莫名其妙的问题，例如"),a("code",[t._v("jwt")]),t._v("包，我开始选择的是"),a("code",[t._v("0.11.1")]),t._v("的这个包，但是不知道为什么老师报错，然后我就换成了"),a("code",[t._v("0.9.0")]),t._v("就好了，很奇怪。")]),t._v(" "),a("p",[t._v("另外就是做接口测试，可以在chrome中装一个插件"),a("a",{attrs:{href:"https://chrome.google.com/webstore/detail/tabbed-postman-rest-clien/coohjcphdfgbiolnekdpbcijmhambjff?utm_source=chrome-ntp-icon",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tabbed Postman - REST Client"),a("OutboundLink")],1),t._v("，这个插件就可以做接口测试，还比较好用。")]),t._v(" "),a("h2",{attrs:{id:"参考链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考链接"}},[t._v("#")]),t._v(" 参考链接")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/xiuaiba/article/details/106386212",target:"_blank",rel:"noopener noreferrer"}},[t._v("Spring Boot整合JWT实现认证"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.bilibili.com/video/BV1KE41157nL",target:"_blank",rel:"noopener noreferrer"}},[t._v("前后端分离后如何实现登录？前端基于vue、axios，后端基于springSecurity、JWT、BCR算法加密解密"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.jianshu.com/p/fcc1a6482143?from=timeline",target:"_blank",rel:"noopener noreferrer"}},[t._v("JWT在身份认证方面的应用"),a("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);